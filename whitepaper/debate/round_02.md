# PACT 辩论纪要 · 第二轮（round_02）

日期：2025-09-30
参与：Vitalik、Tim、Nenad、Glen、George、白隼（评审）

---

## 议题 A：分期结清是否需要标准化扩展？
- Tim：反对进入 ERC‑PACT。分期增加策略维度与状态爆炸，证明困难、攻击面大；若真要做，另起 EIP（Installment Escrow），接受更强假设与复杂度。
- Vitalik：赞同。分期常引诱“把仲裁/信誉上链”，与最小内置冲突。
- George：分期稀释“双输威慑”，不利于把“交付—结清”做成理性占优路径。
- 白隼：若必须支持，需交付幂等/回滚/对账/复杂度上界与失败判据；当前无人给出最小修复集，故不纳入本 ERC。
- 结论：不纳入 ERC‑PACT；如需，独立 EIP 研究。

## 议题 B：代币支持矩阵（fee‑on‑transfer/rebasing/777）
- Vitalik：核心协议默认不支持异常语义代币，避免余额漂移与重入/回调风险；可由实现“适配层”承接，但不进入标准。
- Tim：跨代币的稳健性需要额外防御与 Gas 成本，破坏“简单且近优”。
- 白隼：若有人要适配，须在安全章节列出差异语义与测试用例；否则阻断。
- 结论：ERC‑PACT 默认 ETH/ERC‑20；异常代币不入标准范围。

## 议题 C：跨域/跨链结算的最小建议
- Nenad：给运营层“可渗透但可控”的参考：桥接额度上限、清算周期（T+N）、专用记账单位（早期不可兑换）。
- Vitalik：同意这些应留在运营与上层协议；核心仅保证事件可重放和状态可索引。
- George：建议在白皮书记录为“参考参数卡”，不入 ERC 条款。
- 结论：作为白皮书附录的运营建议，不进入 ERC 核心。

## 议题 D：`acceptPriceBySig` 的 MEV 与抢跑风险
- Tim：接受交易可能被观察者抢跑无直接危害，但应确保：报价包含 proposer、per‑order per‑proposer nonce、deadline、acceptor 必须为对手方，避免第三方“替换对手”。
- Vitalik：域分隔含 chainId/verifyingContract；建议在结构中显式绑定 proposer 与 orderId；强制 acceptor != proposer。
- 白隼：需要向量：有效/过期/重放/跨链重放/错对手方/nonce 倒退/nonce 提前跳跃/签名可塑。无向量视为阻断。
- 结论：在 `specs/pact_eip712.md` 给出结构与完整测试向量；ERC 草案列安全考虑。

## 议题 E：批量与元交易（4337 打包）
- Vitalik：允许在应用层用 4337 打包，但 ERC 不内置“批量接口”；保持内核极简。
- Tim：批量改变 Gas 与失败关联结构，测试面大幅增加，不建议入标准。
- 白隼：若要支持，需独立扩展 + 复杂度与失败判据；否则阻断。
- 结论：不纳入 ERC‑PACT；可作为上层组合能力。

## 议题 F：信誉与隐私
- Glen：用事件与指标作为公共品治理与信誉输入，但信誉判定留给上层；避免“唯代币投票”。
- George：交易历史数据（结清率、A/E_c、争议/没收率、Top‑up 轨迹）是信誉基石；协议提供一致的数据口径即可。
- Vitalik：隐私可在上层通过 ZK 或聚合器处理；协议内核不承担。
- 结论：保持“数据可得、判定在外”的原则；白皮书给出指标清单与示例仪表。

---

未决事项（open）
- 是否发布“Installment Escrow”独立 EIP 的问题构架与必要条件。
- 价格协商的速率限制与退避策略是否需要最小建议（当前倾向放到实现/运营层）。
- 代币适配的“最小能力矩阵”是否需要在白皮书给出非规范性说明。

下一步
- 更新 `specs/pact_eip712.md`（结构/域/向量）。
- 在白皮书附录加入“运营参考参数卡”（桥接/清算/专用记账单位）。
- 将 `pact_erc.md` 迁移到 `eips/erc-pact.md` 并补 Security/Back‑compat。


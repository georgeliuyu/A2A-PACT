# NAS 协议博弈分析（Vitalik 视角）—— 以规范为 SSOT，game 为参考

说明与边界
- SSOT：严格以 `docs/zh/nesp_spec.md` 为唯一语义源（状态机、口径、MUST/SHOULD/MAY、不变量）。
- 参考：`docs/zh/nesp_game_theory.md` 的论证结构与“定理汇总/基线对比”为信息性材料（非规范）。
- 目标：将 NAS 的博弈论要点、工程含义与治理取向用 Vitalik 的“共识最小化 + 可信中立”框架重写与聚焦。

SSOT 对齐要点
- 不变量与口径：`A ≤ E`，托管只增不减；无争议结清全额放款；争议期内仅验证签名与 `A ≤ E`；时间窗口 `D_due/D_rev` 可延后、`D_dis` 固定；状态与事件映射（见 SSOT §7）。
- 设计原则：MUST NOT 把仲裁/治理/信誉内置到共识；协议仅提供可验证状态与事件；零协议费；Pull 结算（见 SSOT §1）。

模型与博弈性质（从 SSOT 引用/复述）
- 玩家与状态：Client/Contractor；`{Initialized, Executing, Reviewing, Disputing, Settled, Forfeited, Cancelled}`（SSOT §2）。
- 支付与收益：结清额 A 时，买方 `V−A`、卖方 `A−C`；没收时对称威慑（SSOT §2）。
- 关键结论（SSOT §6“收益比较与均衡”信息性）：
  - PR.1 付款不劣：`E − A ≥ 0`；PR.2 卖方没收为劣（在常见参数下）。
  - PR.3 存在“交付并结清”的子博弈完美均衡路径（充分条件）。
  - PR.4 Top-up 把买方偏好由 `forfeit/tie` 推向 `pay`。

Vitalik 视角的重写重点
- 共识最小化（Minimal Enshrinement）
  - 与 SSOT 完全一致：仲裁/声誉/表决不进入 L1 共识职责，协商金额用签名（EIP‑712/1271）完成，链上只验 `A ≤ E` 与报文有效性。
  - 工程含义：避免把“是否交付良好”类社会判断上链，维持 L1 可信中立；把争议解决的主观性留在链下签名与时间窗口的制度设计中。
- 可信中立（Credible Neutrality）
  - 对称没收机制把“冻结/裁量权”从平台/陪审团中移出，改为确定性时间与对称规则；减少“权力被俘获”的机制风险（参考 game 文档 §3 基线 2）。
  - 事件与口径标准化（SSOT §7/§8），利于第三方构建开放监测与审计，提升“看得见的中立”。
- 账户抽象与用户体验（不改变博弈语义）
  - 在保持共识最小化的前提下，可通过 4337/2771 做代付/转发，但 SSOT 已限定“授权/白名单与事件口径”（`via` 字段）；不可改变 `A ≤ E` 与窗口语义。

参数与监测（Vitalik 风格聚焦）
- 路线：优先保证“简单且可验证”的内核；把钱包/UX/声誉/恢复在应用层渐进推进。
- 指标：
  - 结清延迟与资金滞留（MET.1/MET.3），反映执行可用性；
  - 协商接受率（MET.4），反映链下协商效率与签名路径可用性；
  - 零协议费违规计数（MET.5），作为可信中立的“自证”。

风险与护栏（与 SSOT 一致，Vitalik 补充解读）
- 过载共识：严禁把“价格/质量仲裁”迁入合约守卫与状态机；否则破坏可信中立并放大系统性风险。
- 再质押/外部治理耦合：任何把外部投票/再质押结果作为结算前置条件的做法均与 SSOT 冲突。
- 签名与回放：签名域、截止时间、nonce、防跨订单复用必须由实现与 SDK 强约束（SSOT §5）。

选择与对比（信息性，参照 game 文档基线）
- 相比中心化托管+仲裁：NAS 以签名+超时没收替代平台裁量；更接近可信中立与最小内置，代价是需要链下协商能力与可观测窗口。
- 相比 HTLC/状态通道：NAS 支持主观性交付与 `A∈[0,E]` 的结清；代价是引入时间窗口与对称没收的“硬威慑”。

结论（Vitalik 视角）
- NAS 的博弈均衡与威慑来自“签名可验证 + 时间可观测 + 对称规则”，恰与“不要过载共识、保持可信中立”的治理标准一致。协议内核应保持极简；钱包/身份/声誉在应用层渐进叠加，不改变 SSOT 语义与不变量。

互学增补（吸收其他专家要点；不改变 SSOT）
- 来自 Tim（简单且近优）：以最小状态与口径支撑“可解释的近似最优”，建议轻量实证回归（信息性）：`A ~ E + T_dis` 方向一致性，用于 sanity check。指标依托 SSOT（MET/GOV）。
- 来自 Glen（公平与公共审计）：关注 `A/E` 分布的群体差异（GOV.2）与没收率（GOV.1），用开放事件口径支持第三方公共仪表盘，提升“可见的中立”。
- 来自 Bob（工程护栏）：以属性测试把“`A ≤ E`、`D_*` 单调、Pull 语义、签名域完整”落为可检不变量；事件字段完整以保障观测与审计。
- 来自 Nenad（渗透性治理）：在应用层引入“分层开桥/额度/清算周期”的外溢风控，不触碰 `A ≤ E` 与时间窗口语义；先沙盒后开放。
- 来自 Blade（可证伪与回滚）：建立“最小验证计划 + SLO/阈值 + 回滚剧本”；MET.5 必须为 0 以自证“零协议费”。
